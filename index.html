<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="./styles/global.css" />
    <link rel="stylesheet" href="./styles/category-page.css" />
    <script>
      const loaded = document.getElementsByClassName('loaded')
      const loader = document.getElementsByClassName('loader')
      function load(){
          loaded[0].classList.toggle('hidden')
          loader[0].classList.toggle('hidden')
      }

      window.addEventListener('DOMContentLoaded', function (){
        load()
      })

      async function fetchProducts() {
        const apiEndpoint = `https://script.google.com/macros/s/AKfycbyOIoDG-vn2lDNgsvUxvzFhpqfGXLDQEWTUVrQBlqOJO5wyrmKoLukNKPJXozdzxZyN/exec`;
      
        const responseProducts = await fetch(apiEndpoint)
          .then((x) => x.json())
          .catch((e) => {
            console.error(e); // error handling
            return []; //returns no-results
          });
        sessionStorage.setItem('allProducts', JSON.stringify(responseProducts))
        console.log('All Products Storaged', sessionStorage.getItem('allProducts'))
        load()
      }
      fetchProducts()

    </script>
    <style>
      ul {
        padding: 0;
        display: grid;
        /*grid-template-columns: 1fr 1fr 1fr;*/
        grid-template-columns: 1fr 1fr;
        grid-template-rows: auto;
        gap: 1rem;
        flex-wrap: wrap;
        max-width: 1140px;
        margin: 0 auto;

        list-style-type: none;

        li.lista-produto {
          border-radius: 16px;

          overflow: hidden;
          box-shadow: 0px 0px 8px #371f3e17;

          img {
            max-width: 100%;
            height: auto;
            aspect-ratio: 4 / 5;
            object-fit: cover;
          }

          a {
            display: inline-block;
            padding: 20px;
            background-color: #371f3e;
            color: white;
          }
        }
      }

      /*rafael botou a mao daqui pra frente*/

      li {
        margin: 10px;
      }

      #intro {
        display: grid;
        grid-template-columns: 1fr;
        justify-items: center;

        #novidades {
          min-width: 353px;
          min-height: 250px;
          display: flex;
          flex-direction: column-reverse;
          align-items: center;

          a {
            bottom: 0px;
            background-color: #81209e;
            color: white;
            border-radius: 1rem;
            width: 10rem;
            padding-left: 1rem;
          }
        }
      }
      .hidden{
        display: none !important;
      }

    </style>
  </head>
  <body>
    <section class="loader hidden"><img src="./img/loading.gif" alt="carregamento"></section>
    <section class="loaded">
      <div id="intro">
        <img id="logo" src="./img/logo.jpg" alt="CATALOGO LISS FITNESS" height="250"/>
        <div
          id="novidades"
          style="background-image: url('./img/teste1.png')"
        >
          <a href="./categorias/newer.html">
            Ver Novidades →

            </svg>
          </a>
        </div>
      </div>
      <h2>Navegue pelas categorias</h2>
      <ul class="list-products">
        <li>
          <img src="./img/Legging Unico.jpg" alt="" />
          <p>Legging + Top Tamanho Unico</p>
          <a href="./categorias/legTu.html"
            >Ver produtos →</a>
        </li>
        <li>
          <img src="./img/Legging Plus.jpg" alt="" />
          <p>Legging + Top Tamanho Plus</p>
          <a href="./categorias/legTp.html"
            >Ver produtos →</a>
        </li>
        <li>
          <img src="./img/Short Unico.jpg" alt="" />
          <p>Short + Top Tamanho Unico</p>
          <a href="./categorias/shoTu.html"
            >Ver produtos →</a>
        </li>
        <li>
          <img src="./img/Short Plus.jpg" alt="" />
          <p>Short + Top Tamanho Plus</p>
          <a href="./categorias/shoTp.html"
          >Ver produtos →</a>
        </li>
        <li>
          <img src="./img/Macacao Unico.jpg" alt="" />
          <p>Macacao Único</p>
          <a href="./categorias/macTu.html"
            >Ver produtos →</a>
        </li>
        <li>
          <img src="./img/Macacao Plus.jpg" alt="" />
          <p>Macacao Plus</p>
          <a href="./categorias/macTp.html"
            >Ver produtos →</a>
        </li>
      </ul>
    </section>
  </body>
</html>
